async function fetchLiveStatus() {
        try {
            // Lekérjük az elmúlt 10 perc adatait a stabil gradienshez
            const now = new Date();
            const tenMinsAgo = new Date(now.getTime() - 10 * 60000).toISOString();
            
            const response = await fetch(`https://api.thingspeak.com/channels/${CHAN_ID}/feeds.json?api_key=${API_KEY}&start=${tenMinsAgo}`);
            const data = await response.json();
            
            if (!data.feeds || data.feeds.length < 2) return;

            const last = data.feeds[data.feeds.length - 1];
            const first = data.feeds[0]; // Ez lesz a ~10 perccel ezelőtti adat

            const lastT = parseFloat(last.field1);
            const lastMs = new Date(last.created_at).getTime();
            const firstT = parseFloat(first.field1);
            const firstMs = new Date(first.created_at).getTime();
            
            // Pontos időkülönbség percekben
            const diffMin = (lastMs - firstMs) / 60000;
            
            // Ha van legalább 1 perc különbség az adatok között, számolunk
            let liveG = 0;
            if (diffMin > 0.5) {
                liveG = (lastT - firstT) / diffMin;
            }

            const liveSt = getStatus(lastT, liveG);

            // UI Frissítése (ÉLŐ kártyák)
            document.getElementById('t_akt').innerText = lastT.toFixed(1) + " °C";
            document.getElementById('t_time').innerText = new Date(lastMs).toLocaleTimeString('hu-HU', {hour:'2-digit', minute:'2-digit', second:'2-digit'});
            document.getElementById('g_akt').innerText = (liveG > 0 ? "+" : "") + liveG.toFixed(2);
            
            const sb = document.getElementById('status');
            sb.innerText = liveSt;
            sb.style.background = COLORS[liveSt];

            // ETA számítás az élő gradiens alapján
            const eb = document.getElementById('eta_box');
            const ev = document.getElementById('eta_val');
            if ((liveSt === "felfűtési" || liveSt === "lassulás") && liveG > 0.05 && lastT < 60) {
                const ms = ((60 - lastT) / liveG) * 60000;
                eb.style.display = "block";
                ev.innerText = Math.round(ms/60000) + " p";
                ev.className = (liveSt === "lassulás") ? "warning-blink" : "";
            } else {
                eb.style.display = "none";
            }

        } catch (e) { console.error("Élő adat hiba:", e); }
    }
