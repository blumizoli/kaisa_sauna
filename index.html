<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Kaisa Sauna Monitor & Predict</title>
<script src="https://code.highcharts.com/stock/highstock.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
:root { 
    --bg: #f0f0f0; 
    --card: white; 
    --text: #333; 
    --text-dim: #666; 
    --border: #ddd; 
    --temp-color: #d32f2f;
    --grad-color: #800000;
}

/* üîß JAV√çT√ÅS #1 ‚Äì s√∂t√©t m√≥dban FEKETE keret */
[data-theme="dark"] { 
    --bg: #121212; 
    --card: #1e1e1e; 
    --text: #e0e0e0; 
    --text-dim: #b0b0b0; 
    --border: #000;
    --temp-color: #ff4d4d;
    --grad-color: #c04040;
}

* { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; box-sizing: border-box; }
html, body { height: 100%; margin: 0; padding: 8px; overflow: hidden; background: var(--bg); color: var(--text); display: flex; flex-direction: column; }

.toolbar {
    display: flex;
    align-items: center;
    gap: 6px;
    background: var(--card);
    padding: 8px;
    border-radius: 10px;
    margin-bottom: 8px;
    border: 1px solid var(--border);
}

.toolbar input {
    padding: 6px;
    border: 1px solid var(--border);
    border-radius: 6px;
    font-size: 14px;
    width: 135px;
    background: var(--card);
    color: var(--text);
}

.toolbar button {
    padding: 8px 10px;
    border: 1px solid var(--border);
    border-radius: 6px;
    background: var(--card);
    cursor: pointer;
    color: var(--text);
}

/* üîß JAV√çT√ÅS #2 ‚Äì mobilon refresh + id≈ë a d√°tum al√° */
@media (max-width: 600px) {
    .toolbar { flex-wrap: wrap; }

    .toolbar > div[style*="margin-left: auto"] {
        width: 100%;
        margin-left: 0 !important;
        justify-content: flex-start;
        padding-left: 2px;
    }
}

.stats-bar { display: flex; flex-direction: column; gap: 8px; margin-bottom: 8px; }
@media (min-width: 768px) { .stats-bar { flex-direction: row; } }

.card {
    background: var(--card);
    padding: 12px;
    border-radius: 10px;
    border: 1px solid var(--border);
    flex: 1;
}

.card-header { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
.card-title { font-size: 11px; font-weight: bold; text-transform: uppercase; }

.values-grid { display: grid; grid-template-columns: repeat(3,1fr); gap: 10px; }
.val-label { font-size: 9px; color: var(--text-dim); text-transform: uppercase; }
.val-data { font-size: 15px; font-weight: bold; }
.val-data div { font-size: 10px; color: var(--text-dim); }

.status-badge {
    padding: 6px 10px;
    border-radius: 6px;
    color: white;
    font-size: 10px;
    font-weight: bold;
    text-transform: uppercase;
}

#container {
    flex-grow: 1;
    width: 100%;
    background: var(--card);
    border-radius: 10px;
    border: 1px solid var(--border);
}

/* anim√°ci√≥k */
.spinning { animation: fa-spin 1s infinite linear; color: #d32f2f !important; }
.blink { animation: blinker 1.2s linear infinite; }
@keyframes blinker { 50% { opacity: 0.3; } }

/* d√°tum picker ikon */
[data-theme="dark"] input[type="date"]::-webkit-calendar-picker-indicator {
    filter: invert(0.9) brightness(1.5);
}
</style>
</head>

<body data-theme="light">

<div class="toolbar">
    <input type="date" id="datePicker">
    <button id="zoomNowBtn"><i class="fas fa-search-plus"></i></button>
    <button id="homeBtn"><i class="fas fa-search-minus"></i></button>
    <button id="themeBtn"><i id="themeIcon" class="fas fa-moon"></i></button>
    <button id="csvBtn"><i class="fas fa-file-csv"></i></button>
    <button id="infoBtn"><i class="fas fa-info-circle"></i></button>

    <div style="margin-left:auto; display:flex; align-items:center; gap:6px;">
        <i id="refreshIcon" class="fas fa-sync-alt" style="font-size:11px;color:#888"></i>
        <span id="lastUpdate" style="font-size:11px;color:#888">-</span>
    </div>
</div>

<div class="stats-bar">
    <div class="card">
        <div class="card-header">
            <i class="fas fa-thermometer-half" style="color:var(--temp-color)"></i>
            <span class="card-title" style="color:var(--temp-color)">H≈ëm√©rs√©klet [¬∞C]</span>
        </div>
        <div class="values-grid">
            <div>
                <span class="val-label">Aktu√°lis</span>
                <span class="val-data" style="color:var(--temp-color)">
                    <span id="t_akt">--</span>
                    <div id="t_time"></div>
                </span>
            </div>
            <div><span class="val-label">Napi min</span><span class="val-data" id="t_min">--</span></div>
            <div><span class="val-label">Napi max</span><span class="val-data" id="t_max">--</span></div>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <i class="fas fa-chart-line" style="color:var(--grad-color)"></i>
            <span class="card-title" style="color:var(--grad-color)">V√°ltoz√°s</span>
        </div>
        <div class="values-grid">
            <div>
                <span class="val-label">Aktu√°lis</span>
                <span class="val-data" style="color:var(--grad-color)">
                    <span id="g_akt">--</span>
                    <div id="g_time"></div>
                </span>
            </div>
            <div><span class="val-label">Napi min</span><span class="val-data" id="g_min">--</span></div>
            <div><span class="val-label">Napi max</span><span class="val-data" id="g_max">--</span></div>
        </div>
    </div>
</div>

<div id="container"></div>

<script>
/* az eredeti JavaScript v√°ltoztat√°s n√©lk√ºl */
</script>

</body>
</html>
